<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Tableau des requêtes - Prestataire</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<!-- Topbar: navigation -->
<header class="topbar">
    <div class="left">
        <button class="menu" onclick="location.href='loginPage.html'"> Menu principal</button>
        <div class="divider"></div>
        <span class="welcome">Bonjour prestataire</span>
    </div>
    <div class="right">
        <!-- notification bell -->
        <div class="notif-wrapper" data-role="prestataire">
            <button type="button" class="notif-btn" aria-haspopup="true" aria-expanded="false" aria-controls="notifDropdown">
                <svg class="notif-icon-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path d="M9.10745 2.67414C9.98414 2.24187 10.9649 2 12 2C15.7274 2 18.7491 5.13623 18.7491 9.00497V9.70957C18.7491 10.5552 18.9903 11.3818 19.4422 12.0854L20.5496 13.8095C21.5612 15.3843 20.789 17.5249 19.0296 18.0229C14.4273 19.3257 9.57274 19.3257 4.97036 18.0229C3.21105 17.5249 2.43882 15.3843 3.45036 13.8095L4.5578 12.0854C5.00972 11.3818 5.25087 10.5552 5.25087 9.70957V9.00497C5.25087 7.93058 5.48391 6.91269 5.90039 6.00277" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path>
                        <path d="M7.5 19C8.15503 20.7478 9.92246 22 12 22C12.2445 22 12.4847 21.9827 12.7192 21.9492M16.5 19C16.2329 19.7126 15.781 20.3428 15.1985 20.8393" stroke="#1C274C" stroke-width="1.5" stroke-linecap="round"></path>
                    </g>
                </svg>
                <span class="notif-badge">0</span>
            </button>

            <div class="notif-dropdown" id="notifDropdown" aria-hidden="true">
                <div class="notif-header">
                    <h4 id="notifTitle">Notifications</h4>
                    <button class="notif-markread small" data-action="mark-all">Marquer tout lu</button>
                </div>
                <ul class="notif-list" id="notifList"></ul>
                <div class="notif-empty" id="notifEmpty">Aucune notification</div>
                <div class="notif-footer"><a href="/notifications">Voir toutes les notifications</a></div>
            </div>
        </div>

        <button class="btn-outline">
            Registre des travaux
        </button>
        <button class="btn-outline">
            Mes candidatures
        </button>
        <button class="btn-primary">
            Soumettre une candidature
        </button>
    </div>
</header>

<!-- Search area - simple client-side filters (behaviour in viewPrestataire.js) -->
<section class="search-section">
    <label for="searchInput"></label><input type="text" id="searchInput" placeholder="Rechercher par numéro, arrondissement ou catégorie...">
    <label for="statusFilter"></label><select id="statusFilter">
        <option value="">Tous les statuts</option>
        <option value="En cours">En cours</option>
        <option value="En attente">En attente</option>
        <option value="Terminé">Terminé</option>
    </select>
</section>


<!-- Table container - data will be injected into #requestTable by JS when implemented -->
<section class="table-container">
    <table id="requestTable">
        <thead>
        <tr>
            <th>Numéro de requête</th>
            <th>Address</th>
            <th>Type de travail</th>
            <th>Titre projet</th>
            <th>Date de début</th>
            <th>Date de fin prévue</th>
        </tr>
        </thead>
        <tbody id="requestTableBody">
        <tr><td colspan="6" class="loading">Chargement des données...</td></tr>
        </tbody>
    </table>
    <p id="resultCount">Affichage des requêtes</p>
</section>

<!-- Modal: form for suppliers to submit an application. File inputs are handled in viewPrestataire.js -->
<div id="prestataireModalOverlay" class="modal-overlay" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="prestModalTitle">
    <button class="modal-close" id="prestModalClose" aria-label="Fermer">&times;</button>
    <h2 id="prestModalTitle" class="modal-title">Soumettre une candidature</h2>
    <p class="modal-sub">Remplissez le formulaire ci-dessous pour devenir prestataire agréé.</p>

    <form id="prestataireForm" class="modal-form">
      <label>Nom de l'organisation <span class="required">*</span>
        <input id="orgInput" name="organization" class="form-control" type="text" placeholder="Ex: Les Entreprises Inc." required>
      </label>

      <div class="form-inline field">

        <label style="flex:1">Numéro de licence
          <input id="rbqInput" class="form-control" type="text" placeholder="Ex: 1234-5678-90">
        </label>
      </div>

      <label>Adresse complète <span class="required">*</span>
        <input id="addressInput" name="address" class="form-control" type="text" placeholder="Ex: 123 Rue Principale, Montréal" required>
      </label>

      <h4 class="small text-muted">Personne contact</h4>
      <div class="form-inline field">
        <label style="flex:1">Nom complet
          <input id="contactName" name="contactName" class="form-control" type="text" placeholder="Jean Pierre" required>
        </label>
        <label style="flex:1">Téléphone <span class="required">*</span>
          <input id="contactPhone" name="phone" class="form-control" type="text" placeholder="(514) 123-4567" required>
        </label>
      </div>
      <div class="form-inline field">
        <label style="flex:1">Courriel <span class="required">*</span>
          <input id="contactEmail" name="email" class="form-control" type="email" placeholder="contact@entreprise.com" required>
        </label>
      </div>

      <h4 class="small text-muted">Services offerts <span class="required">*</span></h4>
      <div class="field two-col-checkboxes">
        <label><input type="checkbox" name="services" value="Travaux routiers"> Travaux routiers</label>
        <label><input type="checkbox" name="services" value="ConstructionOrRenovation"> Construction/rénovation</label>
        <label><input type="checkbox" name="services" value="GazOrElectric"> Gaz / Électricité</label>
        <label><input type="checkbox" name="services" value="TelecommunicationsMaintenance"> Télécommunications</label>
        <label><input type="checkbox" name="services" value="Landscaping"> Aménagement paysager</label>
        <label><input type="checkbox" name="services" value="UrbanMaintenance"> Entretien urbain</label>
        <label><input type="checkbox" name="services" value="UndergroundWork"> Travaux souterrains</label>
        <label><input type="checkbox" name="services" value="PublicsTransportWork"> Transports en commun</label>
        <label><input type="checkbox" name="services" value="SignageAndLighting"> Signalisation / éclairage</label>
        <label><input type="checkbox" name="services" value="ResidentialWork"> Travaux résidentiels</label>
      </div>

      <label>Description de l'entreprise
        <textarea id="descriptionInput" name="description" class="form-control" rows="4" placeholder="Décrivez brièvement votre entreprise, votre expérience et vos qualifications..."></textarea>
      </label>

      <h4 class="small text-muted">Méthodologie et approche</h4>
      <hr>

      <label>Description de votre approche <span class="required">*</span>
        <textarea id="approachDescription" name="approachDescription" class="form-control" rows="4" placeholder="Décrivez comment vous comptez réaliser ce projet, les étapes clés, etc..." required></textarea>
      </label>

      <label>Méthode de travail
        <textarea id="workingMethod" name="workingMethod" class="form-control" rows="3" placeholder="Ex: Travaux en phases, fermeture partielle de la rue, horaires de nuit..."></textarea>
      </label>

      <label>Équipement utilisé
        <textarea id="equipmentUsed" name="equipmentUsed" class="form-control" rows="3" placeholder="Liste de l'équipement et des machines qui seront utilisés..."></textarea>
      </label>

      <label>Plan de sécurité
        <textarea id="safetyPlan" name="safetyPlan" class="form-control" rows="3" placeholder="Mesures de sécurité, signalisation, protection du public..."></textarea>
      </label>

      <h4 class="small text-muted">Documents requis</h4>
      <hr>

      <div id="prestFileDropRBQ" class="file-drop">
        <input id="prestFileInputRBQ" type="file" accept="application/pdf" />
        <div class="file-drop-inner">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v10" stroke="#7b8794" stroke-width="1.5"/><path d="M8 7l4-4 4 4" stroke="#7b8794" stroke-width="1.5"/></svg>
          <div class="file-drop-text">Licence RBQ<br><small>PDF jusqu'à 5MB</small></div>
        </div>
      </div>

      <div id="prestFileDropBudget" class="file-drop" style="margin-top:12px">
        <input id="prestFileInputBudget" type="file" accept="application/pdf" />
        <div class="file-drop-inner">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v10" stroke="#7b8794" stroke-width="1.5"/><path d="M8 7l4-4 4 4" stroke="#7b8794" stroke-width="1.5"/></svg>
          <div class="file-drop-text">Soumission détaillée (budget)<br><small>PDF jusqu'à 10MB</small></div>
        </div>
      </div>

      <div id="prestFileDropPlan" class="file-drop" style="margin-top:12px">
        <input id="prestFileInputPlan" type="file" accept="application/pdf" />
        <div class="file-drop-inner">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v10" stroke="#7b8794" stroke-width="1.5"/><path d="M8 7l4-4 4 4" stroke="#7b8794" stroke-width="1.5"/></svg>
          <div class="file-drop-text">Plan d'exécution (optionnel)<br><small>PDF jusqu'à 10MB</small></div>
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" class="btn-outline" id="prestCancel">Annuler</button>
        <button type="submit" class="btn-primary">Soumettre</button>
      </div>
    </form>
  </div>
</div>

<footer>
    <p>© Petit Génie - 2025</p>
</footer>

<script src="viewPrestataire.js"></script>
<script src="notifications.js"></script>

</body>
</html>
